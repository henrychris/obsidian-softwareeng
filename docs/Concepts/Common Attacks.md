# Note - Same Origin Policy
Stops one website from reading or writing data to another. Only when protocol, host and port match for two different websites would cross-origin read and write be allowed.
# XSS - Cross-Site Scripting
Cross-Site Scripting (XSS) is a security vulnerability that occurs when an attacker injects malicious scripts (usually JavaScript) into a web application, which is then executed within the context of other users' browsers. This vulnerability allows attackers to steal sensitive information, manipulate the displayed content, or perform actions on behalf of users without their consent.

# Types
## Reflected
- Malicious scripts are injected into a URL or input field, and the web application reflects this input back to the user without proper sanitization. When the victim clicks on a crafted link, the script executes.
## Stored
- Malicious scripts are stored on the server and displayed to users who access a particular page or application section. For example, in a forum post or comment section.
## DOM-Based
- On the client-side only, when user-input is poorly handled, it allows JS to be executed in the browser.
## Mutation
- User input is changed somehow by the browser, before being injected into the DOM and executed.

# CSRF - Cross-Site Request Forgery
CSRF is an attack where a malicious actor tricks a user's browser into performing actions on a secured site without their knowledge or consent. Here's how it works:
1. **Attacker's Setup**:
    - The attacker crafts a malicious webpage (`dostuff.com`) that contains code to perform actions on a target secured site where the victim is authenticated.
    - The attacker assumes the victim is logged into the secured site and has a valid session cookie storing their authentication details.
2. **Exploiting the Authenticated Session**:
    - When the victim visits the malicious page (`dostuff.com`), the browser automatically sends any cookies associated with the target site, including the session cookie.
    - As a result, the browser unwittingly sends authenticated requests to the target site, carrying the victim's credentials.
3. **Server Trusts the Request**:
    - The server receiving the request identifies it as valid because it comes with the victim's authentication cookie, assuming it's a legitimate request from the authenticated user.
    - Without proper protection, the server processes the request, executing unintended actions on behalf of the victim.

## Countermeasures
- **Anti-CSRF Tokens** - a token generated by the secure site that is impossible to guess and impossible get from the browser. Before processing any action, the server checks for and validates this token to ensure the request originates from a legitimate source, mitigating unauthorized actions initiated by the attacker.
- **SameSite Cookie Attribute** - By setting cookies with the `SameSite` attribute to `Strict` or `Lax`, the browser is instructed not to send these cookies when the user navigates from a third-party site to the secured site. Read [[Auth in Dec 2023]].