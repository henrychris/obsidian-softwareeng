# Basics
A **block** contains data, its own hash, and the hash of the previous block. This structure links blocks together to form a blockchain. **Any type of data** can be stored in a block, depending on the blockchain's use case.

A **hash** is a unique identifier for the block. If any data within the block changes, the hash also changes, making it easy to detect tampering.

The **hash of the previous block** is included in each block to maintain the chain structure. The first block in the chain, known as the **genesis block**, does not have a previous block hash.

![[Pasted image 20241009100210.png]]
# Proof Of Work
Blockchains that use **Proof of Work** (PoW) require miners to solve a computationally difficult problem to create new blocks. This process slows down the creation of new blocks, ensuring the security and integrity of the blockchain.

In Bitcoin, a _nonce_ (a number that miners can change) is used in the PoW process. Miners repeatedly modify the nonce and hash it together with the block data. The goal is to find a nonce that, when hashed with the block data, produces a hash that begins with a specified number of leading zero bits (the **difficulty target**). This process ensures that mining requires significant computational effort. The difficulty target can be changed to make mining harder.

Note that blocks are linked together using the hash of the previous block. When a hash of a block is generated, the previous hash is part of the input to the hash function. If the previous block is tampered with, its hash is changed - which makes the subsequent block invalid. If the subsequent block is updated to use the new hash, the subsequent block's hash is changed and the PoW must be recomputed to make it valid.  

As such, tampering with one block requires you to recompute its proof of work and do the same for all subsequent blocks in the chain.
# Decentralisation
Since the blockchain is distributed and decentralised, **anyone** can join the network by creating a node. New nodes receive **a full copy of the blockchain**, allowing them to independently verify the validity of the data.

When a new block is added to the blockchain, it is broadcast to the entire network. **Nodes** validate the block by checking its proof of work, the hashes, and ensuring that it adheres to the blockchain's rules (e.g., no double-spending). If the block is valid, nodes add it to their local copy of the chain. The nodes then reach a **consensus** on the accepted chain through the consensus mechanism (such as Proof of Work), ensuring that all nodes agree on the valid state of the blockchain.

To tamper with a blockchain, an attacker would need to modify not only a single block but also all subsequent blocks, as each block's hash depends on the previous one. They would also need to recompute the proof of work for each block and control the majority of nodes (51% or more) to ensure their tampered version of the blockchain is accepted. This makes tampering **extremely difficult** and computationally impractical, securing the blockchain's integrity.
# Longest Chain Rule
If two blockchains come in with conflicting transaction histories, the nodes simply need to choose the chain with the most computation effort put in to it - the chain that required more PoW to build.
## How it works:
1. **Forks Occur**: Occasionally, two miners may solve the Proof of Work at almost the same time and broadcast their blocks to the network. This creates a temporary fork, where some nodes will receive one block, and others will receive the other.
2. **Nodes Add Blocks**: Some nodes will add one block to their version of the chain, while others will add the conflicting block. Now the blockchain has diverged into two valid versions with different transaction histories.    
3. **Resolve the Conflict**: As more blocks are mined, one of the chains will eventually become longer (have more blocks or more cumulative PoW) than the other. Nodes will then adopt the longest chain as the valid one because more computational work has gone into producing it, which indicates a higher level of security.    
4. **Reorg and Discard the Shorter Chain**: Once the longest chain is determined, the shorter chain (with less cumulative PoW) is discarded, and the nodes that had previously accepted it switch to the longest chain. Any transactions that were in the discarded chain but not in the longest chain are returned to the unconfirmed pool and may be included in future blocks.
## Why this works:
The longest chain rule ensures that all nodes eventually converge on the same version of the blockchain. The logic is simple: the chain with the most accumulated work is the most secure, as it represents more effort and resource expenditure. This also discourages tampering, as an attacker would need to outpace the entire network's cumulative computational power to overwrite the valid chain, which is **extremely difficult and expensive**.

In summary, the "longest chain" represents the chain with the most Proof of Work and is accepted by nodes as the valid blockchain during conflicts. This keeps the blockchain consistent and prevents divergent transaction histories from persisting.
# Mining
Miners listen for new transactions on the network, create a block & compute the proof of work and broadcast the block to the network. They get a reward for this computation effort.

